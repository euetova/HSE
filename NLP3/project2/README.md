# TreeTager

## 1. Проанализируйте систему тегов:
### 1.1. Сколько частей речи учитывает система; какие части речи в системе отсутствуют, а Вы считаете, что эти части речи необходимо выделять (ответ мотивируйте)

- A - прилагательное 
- C - союз
- I - междометие
- M - числительное
- N - существительное
- P - местоимение
- Q - частица
- R - наречие
- S - предлог
- V - глагол
- X - другое
- Y - аббревиатура

Думаю, можно было бы отдельно выделять причастее и деепричастие. В TreeTager они обозначаются как формы глагола. Разбор выглядит довольно громоздко.

### 1.2. В какие pos-классы попадают местоимения

Ниже распарсен список частотных местоимений. Местоимения иногда попадают в классы союзов (в результате омонимии, например, что), существительных (местоимения кто и что), “остальное” (к этому классу TreeTagger относит неопределенные местоимения где-то, некогда, какой-то) и частицы Нашла я тут какой-то рандомный частотный список местоимений. Вот короче какая штуковина получилась. Попадают местоимения в классы союзов (если они омонимичны им, еееее омонимия), существительных (почему? не знаю), “остальное” (туда улетают в основном неопределенные местоимения) и частицы (вон, вот). Более того для местоимений с аффиксами (-то, -нибудь, кое-) лемма часто неизвестна. В НКРЯ лемма также содержит в своём составе аффкис (кое-кто, где-нибудь, что-то)ю

- личные:  
  я P-1-snn я  
  они P-3-pnn они

- возвратные:  
себя P----an себя

- притяжательные:  
свой P--msaa свой  
ее P-3fsan она  

- относительные/вопросительные:  
**что C что**  
 кто P--msnn кто  
который P--msna который  

- неопределенные:  
нечто P--nsnn нечто  
некий P--msna некий  
некоторый P--msna некоторый  
какой-то	P--msna	какой-то  
кто-то	P--msnn	кто-то  
какой-нибудь	P--msna	какой-нибудь  
какой-либо	P--fsga	какой-либо  
кое-что	P--nsan	кое-что  

- отрицательные:  
ничто P--nsnn ничто  
никакой P--msna никакой  

- указательные:  
этот P--msna этот  
сей P--msaa сей  

- определительные:  
сам P--msna сам  
другой P--msna другой  
весь P--msna весь  

- местоим-наречия:  
как	P-----r	как  
**когда C когда**  
куда P-----r куда  
тогда P-----r тогда  
здесь P-----r здесь  
никогда P-----r никогда  
где-то	P-----r	где-то  
когда-нибудь	P-----r	когда-нибудь  

Местоимения определяются хорошо, но иногда попадают в класс союзов (если есть омонимия с союзами).

### 1.3. Как лемматизируются причастия?

Чаще как глагол, но иногда как прилагательные и существительные. 

бегущий Vmpp-smafen бежать  
пишущийся Afpmsnf пишущийся  
строящий	Ncmsny	строящий  

### 1.4. К одной или разным леммам будет отнесены словоформы нашедший и находившего, дал и давал

нашедший	Vmps-smafpn	найти  
находившего	Afpmpnf	находившего  

Сложно ответить, так как одно из причастий нелемматизированно, к тому же как прилагательное. 

дал	Vmis-sma-p	дать  
давал	Vmis-sma-e	давать  

Во втором случае леммы разные: 'дать' и 'давать'.

### 1.5. Напишите правило пересчета тегов системы на теги из ЗС для анафорических местоимений (он, она и т.п.) и наречий 

P -> PRO	местоимение  
R -> ADV  наречие  

- лицо:  
1 -> 1р	  
2 -> 2р   
3 -> 3p  

- число:  
s -> sg	 
p -> pl	 

- падеж:  
a -> acc  
n -> nom  
g -> gen  
d -> dat  	
l -> loc  
i -> ins  
n -> S (nominal, перед PRO)  

## 2. Проведите функциональное тестирование выбранной Вами программы.
### 2.1. Для этого подберите примеры, содержащие сложные и проблемные случаи для морфологического анализа: например, незнакомые слова, случаи различных типов омонимии, сложные случаи с точки зрения определения частей речи (например, отглагольное прилагательное vs. причастие, частица vs. союз, наречие vs. краткое прилагательное и т.д.)
### 2.2. Ответьте на следующие вопросы:
#### 2.2.1. Как решаются проблемы токенизации: что происходит с числами, десятичными числами, сокращениями типа г., словами с дефисами, апострофом, знаками препинания? спецзнаками типа $ или &, смешанными элементами (буквы+цифры, вкраплениями другого алфавита) etc.?

Числа: У числительных, записанных цифрами, падеж не определяется. Порядковые числительные, записанные как n-е и nго определяются как прилагательные. 

6 Mc---d 6  
1,5 Mc---d 1,5  
тремя Mcm-i тремя  
пять Mc--n пять  
десятых Mo-pg десятый  
10-е Afpnsnf 10-е  
10го Afpmsgf 10го  

Сокращения типа г. - зависит от сокращения. Иногда распознается хорошо (тыс. как тысяча), иногда не распознается (др. как другие или инициалы)  
Слова с дефисами или апострофам - остаются одним токеном  
Знаки препинания - определяются как отдельный токен. Многоточие - один токен, а не три отдельных  
Слова со спецзнаками - тоже остаются одним токеном, например, #хэштег	Ncmsny	#хэштег  

#### 2.2.2. Что происходит с незнакомыми словами? Насколько хорошо предсказываются их грамматические характеристики, их леммы?

Как правило лемма не угадывается, вместо нее записывается сама словоформа. Грамматические характеристики определяются в целом хорошо.
глокая	Afpfsnf	глокая  
куздра	Ncfsnn	куздра  

#### 2.2.3. Что происходит с омонимичными словоформами: предлагается только один максимально вероятный вариант, предлагаются все возможные варианты, предлагаются все варианты, за исключением очень маловероятных случаев или случаев, снимаемых "надежными" правилами и т.п.

Предлагается один вариант. 

#### 2.2.4. Какие проблемные случаи омонимичных разборов разбираются хорошо, в каких часто возникают ошибки и т.п. (например, (а) частеречная омонимия: прилагательное vs. существительное, глагол vs. прилагательное, наречие vs. частица; (б) падежная омонимия; (в) омонимия различных местоименных форм и т.д.)

С омонимией все не очень хорошо. 

**местоимение vs. союз - хорошо**  

*Что делает больной?*
Что	P--nsnn	что  
делает	Vmip3s-a-e	делать  
`больной	Ncmsny	больной`  
?	SENT	?  

*Я думаю, что ребенок идет на поправку*  
Я	P-1-snn	я  
думаю	Vmip1s-a-e	думать  
,	,	,  
что	C	что  
`больной	Afpmsnf	больной`  
ребенок	Ncmsny	ребенок  
идет	Vmip3s-a-e	идти  
на	Sp-a	на  
поправку	Ncfsan	поправка  
.	SENT	.  

**местоимение vs. глагол - плохо**  

*Мою книгу забрали.*  
`мою	P--fsaa	мой`  
книгу	Ncfsan	книга  
забрали	Vmis-p-a-p	забрать  
.	SENT	.  

*Я мою пол.*  
я	P-1-snn	я  
`мою	P--fsaa	мой`  
пол	Mc	пол  
.	SENT	.  

**наречие vs. частица - плохо**  

*Он исключительно талантливый актер.*  
он	P-3msnn	он  
`исключительно	R	исключительно`  
талантливый	Afpmsnf	талантливый  
актер	Ncmsny	актер  
.	SENT	.  

*Они необходимы исключительно для вида.*  
они	P-3-pnn	они  
необходимы	Afpmpns	необходимый  
`исключительно	R	исключительно`  
для	Sp-g	для  
вида	Ncmsgn	вид  
.	SENT	.  

**прилагательное vs. глагол - плохо**  

*помидор спел и свеж*  
помидор	Ncmsnn	помидор  
`спел	Vmis-sma-e	спеть`  
и	C	и  
свеж	Afpmsns	свежий  
.	SENT	.  

*он спел песню*  
он	P-3msnn	он  
`спел	Vmis-sma-p	спеть`  
песню	Ncfsan	песня  
.	SENT	.  

**падеж и число - плохо**  

*росли березы.*  
росли	Vmis-p-a-e	расти  
`березы	Ncfsgn	береза`  
.	SENT	.  

*нет ни одной березы.*  
нет	R	нет  
ни	Q	ни  
одной	Mof-g	один  
`березы	Ncfsgn	береза`  
.	SENT	.  

## 3. Обработайте с помощью морфологического анализатора файл.
Ответ сохраните / преобразуйте в следующий формат:
Каждый токен на отдельной строке – лемма, часть речи, полный грамматический тег. Каждое поле отделяется табуляцией. Знаки препинания, числа, служебные знаки: скобки, слэш и т.п. на отдельной строке. См. файл Золотого стандарта. 
Для 500 словоформ из файла ЗС определите:
уровень оставшейся неоднозначности: число элементов в Output(W) для всех слов тестируемого текста, поделенное на число слов в тексте. Если алгоритм работает однозначно, то этот параметр равняется 1.
лексическая точность алгоритма - число слов текста, для которых лемма приписана правильно, поделенное на общее число слов которым система приписала какие-то теги
NB если система приписывает леммы всем словоформам текста, то говорят не о точности и полноте, а об accuracy
точность - число слов текста, для которых хотя бы одна аннотация правильна (в случае морфологического анализа без дизамбигуации) / аннотация правильна, поделенное на общее число токенов в тексте, которым приписан хотя бы какой-то разбор (если всем токенам что-то приписано, говорят об accuracy).
accuracy – отношение числа правильно разобранных словоупотреблений (токенов) к числу словоупотреблений (токенов) в тексте (опять же, если система приписывает разборы не всем словам в тексте).

Код в transform.py  
В treetager.txt текст преобразованный TreeTagger  
В GoldStandard.txt - золотой стандарт  
В output.txt - файл treetagger.txt, преобразованный в нужный формат  
Уровень оставшейся неоднозначности – 1  
Лексическая точность - 0.872  
Accuracy - 0.789  
